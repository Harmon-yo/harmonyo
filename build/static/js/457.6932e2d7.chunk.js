(self.webpackChunkharmonyo=self.webpackChunkharmonyo||[]).push([[457],{1687:function(a,e,t){"use strict";var n=t(1243).Z.create({baseURL:"http://localhost:8080"});e.Z=n},3345:function(a,e,t){"use strict";var n=t(9439),o=t(3044),r=t(2791),s=t(1659),i=t(184);function c(a,e){var t=a.id,c=a.nome,u=(0,r.useState)(""),l=(0,n.Z)(u,2),d=l[0],m=l[1],f=(0,r.useState)(!1),h=(0,n.Z)(f,2),g=(h[0],h[1]),p=(0,r.useState)(!1),v=(0,n.Z)(p,2),x=v[0],Z=v[1];(0,r.useImperativeHandle)(e,(function(){return{getImgPerfilURL:function(){return d}}}),[d]);var j=function(a){var e="/imgs-perfil-usuario/".concat(a,"_ft_perfil");s.t.ref(e).getDownloadURL().then((function(a){m(a),g(!0)})).catch((function(){Z(!0)}))};(0,r.useEffect)((function(){a.naoCarregar&&(a.imgUrl?m(a.imgUrl):j(t))}),[]),(0,r.useEffect)((function(){a.imgUrl?(m(a.imgUrl),Z(!1)):j(t)}),[a.recarregarImg]);var b=x?"#099250":"#eeeeee",N=a.sx?a.sx:{};return N.bgcolor=b,x?(0,i.jsx)(o.Z,{className:a.className,onClick:a.onClick,"aria-controls":a.ariaControls,"aria-haspopup":a.ariaHaspopup,"aria-expanded":a.ariaExpanded,sx:N,children:x?c.charAt(0):""}):(0,i.jsx)(o.Z,{src:x?null:d,className:a.className,onClick:a.onClick,"aria-controls":a.ariaControls,"aria-haspopup":a.ariaHaspopup,"aria-expanded":a.ariaExpanded,sx:N,children:x?c.charAt(0):""})}e.Z=(0,r.forwardRef)(c)},4056:function(a,e,t){"use strict";t.d(e,{Z:function(){return B}});var n=t(9439),o=t(2791),r=t(4554),s=t(9284),i=t(9310),c=t(2125),u=t(6630),l=t(9230),d=t(3709),m=t(2167),f=t(13),h=t(533),g=t(890),p=t(184);var v=function(a){return(0,p.jsx)(h.Z,{className:"navbar-lateral-card-container",href:a.href,underline:"none",children:(0,p.jsxs)(r.Z,{className:"navbar-lateral-card ".concat(a.active?"active":"not-active"),children:[a.hover?(0,p.jsx)(a.icon,{className:"navbar-lateral-card-img-hover"}):(0,p.jsx)(a.icon,{className:"navbar-lateral-card-img"}),a.hover?(0,p.jsx)(g.Z,{className:"navbar-lateral-card-texto",children:a.titulo}):""]})})};var x=function(a){var e=o.useState(!1),t=(0,n.Z)(e,2),h=t[0],g=t[1],x=sessionStorage.getItem("CATEGORIA").toLocaleLowerCase(),Z={professor:[{titulo:"Dashboard",icon:i.Z,active:"dashboard"===a.tela,href:"/dashboard-professor"},{titulo:"Agenda",icon:c.Z,active:"agenda"===a.tela,href:"/agenda"},{titulo:"Pedidos",icon:u.Z,active:"pedidos"===a.tela,href:"/pedidos"},{titulo:"Chat",icon:l.Z,active:"chat"===a.tela,href:"/chat"},{titulo:"Aulas",icon:d.Z,active:"aulas"===a.tela,href:"/aulas"}],aluno:[{titulo:"Encontrar",icon:m.Z,active:"encontrar"===a.tela,href:"/encontrar-professor"},{titulo:"Agenda",icon:c.Z,active:"agenda"===a.tela,href:"/agenda"},{titulo:"Pedidos",icon:u.Z,active:"pedidos"===a.tela,href:"/pedidos"},{titulo:"Chat",icon:l.Z,active:"chat"===a.tela,href:"/chat"},{titulo:"Feedbacks",icon:f.Z,active:"feedbacks"===a.tela,href:"/feedbacks"}],administrador:[{titulo:"Dashboard",icon:i.Z,active:"dashboard"===a.tela,href:"/dashboard-administrador"}]};return(0,p.jsx)(r.Z,{className:"navbar-lateral-background",children:(0,p.jsxs)(r.Z,{className:"navbar-lateral",onMouseEnter:function(){return setTimeout((function(){return g(!0)}),50)},onMouseLeave:function(){return setTimeout((function(){return g(!1)}),150)},children:[(0,p.jsxs)("a",{href:"/",className:"navbar-lateral-logo-container",children:[(0,p.jsx)(s.Z,{icon:!0,white:!0,height:"40px",className:"navbar-lateral-logo ".concat(h?"hidden":"")}),(0,p.jsx)(s.Z,{white:!0,width:"200px",className:"navbar-lateral-logo ".concat(h?"":"hidden")})]}),(0,p.jsx)(r.Z,{className:"navbar-lateral-cards",children:Z[x].map((function(a){return(0,p.jsx)(v,{href:a.href,titulo:a.titulo,icon:a.icon,active:a.active,hover:h},"opcao-navbar-".concat(a.titulo))}))})]})})},Z=t(2),j=t(8121),b=t(3786),N=t.p+"static/media/business-proposal.0fb9562397d64134bfe0.png",D=t(5117);var C=function(a){return(0,p.jsx)(D.Z,{id:a.menuId,anchorEl:a.anchorEl,open:a.open,onClose:a.handleClose,MenuListProps:{"aria-labelledby":a.buttonClassName},children:a.children})},M=t(2426),_=t.n(M),S=(t(827),t(1687)),I=function(a,e){return S.Z.put(a,e,{headers:{Authorization:"Bearer ".concat(sessionStorage.TOKEN)}})};var E=function(a){var e=sessionStorage.getItem("ID"),t=(0,o.useState)(0),s=(0,n.Z)(t,2),i=s[0],c=s[1],u=(0,o.useState)([]),l=(0,n.Z)(u,2),d=l[0],m=l[1],f=(0,o.useState)(0),h=(0,n.Z)(f,2),v=h[0],x=h[1],D=(0,o.useState)(null),M=(0,n.Z)(D,2),E=M[0],y=M[1],w=!!E,k=function(){var a;(a="/notificacoes/usuario/".concat(sessionStorage.ID),S.Z.get(a,{headers:{Authorization:"Bearer ".concat(sessionStorage.TOKEN)}})).then((function(a){var e=a.data,t=e.content;console.log("Recebi a notificacao: "),console.log(t),204!==a.status?(t.forEach((function(a){a.tempo=_()(a.data).fromNow(),a.src=N})),c(e.totalPages),m(t),x(t.filter((function(a){return!a.lida})).length)):m([])})).catch((function(a){console.log(a)}))};return(0,o.useEffect)((function(){k()}),[]),(0,p.jsxs)("div",{children:[(0,p.jsx)(j.Z,{id:"notificacao-botao",className:"container-usuario-notificacao",color:"primary",badgeContent:v,"aria-controls":w?"notificacao-menu":void 0,"aria-haspopup":"true","aria-expanded":w?"true":void 0,onClick:function(a){y(a.currentTarget)},children:(0,p.jsx)(Z.Z,{})}),(0,p.jsxs)(C,{menuId:"notificacao-menu",buttonClassName:"notificacao-botao",anchorEl:E,open:w,handleClose:function(){y(null)},className:"notificacao-card",children:[(0,p.jsxs)(r.Z,{className:"notificacao-menu-container-title",children:[(0,p.jsx)(g.Z,{className:"notificacao-menu-title",children:"Notifica\xe7\xf5es"}),v>0?(0,p.jsx)(g.Z,{className:"notificacao-menu-lido",onClick:function(){I("/notificacoes/lida-usuario/".concat(e),{}).then((function(a){200===a.status&&(d.forEach((function(a){a.lida=!0})),m(d),x(0))})).catch((function(a){console.log(a)}))},children:"Marcar como visto"}):""]}),d.map((function(a){return(0,p.jsxs)(b.Z,{className:"notificacao-menu-item",onClick:function(){var e;e=a.id,I("/notificacoes/lida/".concat(e),{}).then((function(a){200===a.status&&(alert("Lendo a notificacao com id: "+e),d.forEach((function(a){a.id===e&&(a.lida=!0)})),m(d),v>0&&x(v-1))})).catch((function(a){console.log(a)}))},sx:{backgroundColor:a.lido?"var(--notificacao-nao-lida)":"var(--notificacao-lida)"},children:[(0,p.jsxs)(r.Z,{className:"notificacao-menu-item-info-container",children:[(0,p.jsx)("img",{src:a.src,className:"notificacao-menu-item-img",alt:""}),(0,p.jsx)(g.Z,{className:"notificacao-menu-item-titulo",children:a.titulo})]}),(0,p.jsx)(r.Z,{className:"notificacao-menu-item-container-tempo",children:(0,p.jsx)(g.Z,{className:"notificacao-menu-item-tempo",children:a.tempo})})]},a.id)})),i>1?(0,p.jsx)(r.Z,{sx:{width:"100%",height:"fit-content",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,p.jsx)(g.Z,{className:"notificacao-menu-lido",children:"Mostrar Todos"})}):""]})]})},y=t.p+"static/media/user.05d0404ad8a0ab5bdefa.png",w=t.p+"static/media/logout.0becdbc391b7088ace83.png",k=t(7689),L=t(3345),A=[{id:1,src:y,titulo:"Meu Perfil",url:"/perfil"},{id:3,src:w,titulo:"Sair",url:"/"}],H=sessionStorage.getItem("NOME");var T=function(a){var e=(0,k.s0)(),t=o.useState(null),s=(0,n.Z)(t,2),i=s[0],c=s[1],u=Boolean(i),l=function(a){c(null),e(a.url)};return(0,p.jsxs)("div",{children:[(0,p.jsx)(L.Z,{id:sessionStorage.getItem("ID"),nome:H,className:"avatar-usuario-img",onClick:function(a){c(a.currentTarget)},ariaControls:u?"avatar-usuario-menu":void 0,ariaHaspopup:"true",ariaExpanded:u?"true":void 0,recarregarImg:a.recarregarTodasImgs}),(0,p.jsxs)(C,{menuId:"avatar-usuario-menu",buttonClassName:"avatar-usuario-botao",anchorEl:i,open:u,handleClose:l,children:[(0,p.jsxs)(r.Z,{className:"avatar-usuario-menu-user-info",children:[(0,p.jsx)(L.Z,{id:sessionStorage.getItem("ID"),className:"avatar-usuario-img",nome:H}),(0,p.jsxs)(r.Z,{className:"avatar-usuario-menu-user-info-text",children:[(0,p.jsx)(g.Z,{className:"avatar-usuario-menu-nome",children:H}),(0,p.jsx)(g.Z,{className:"avatar-usuario-menu-email",children:sessionStorage.getItem("EMAIL")})]})]}),(0,p.jsx)(r.Z,{className:"opcoes-container",children:A.map((function(a){return(0,p.jsxs)(b.Z,{className:"avatar-usuario-menu-item",onClick:function(){return l(a)},children:[(0,p.jsx)("img",{src:a.src,className:"avatar-usuario-menu-item-img",alt:""}),(0,p.jsx)(g.Z,{className:"avatar-usuario-menu-item-titulo",children:a.titulo})]},a.id)}))})]})]})};var Y=function(a){return(0,p.jsxs)(r.Z,{className:"container-usuario",children:[(0,p.jsx)(E,{}),(0,p.jsx)(T,{recarregarTodasImgs:a.recarregarTodasImgs})]})},F=t(9658),O=t(3400),P=t(6739);var B=function(a){var e=(0,o.useState)(!1),t=(0,n.Z)(e,2),s=(t[0],t[1]),i=(0,o.useState)([]),c=(0,n.Z)(i,2),u=c[0],l=c[1],d=a.recarregarTodasImgs;return(0,o.useEffect)((function(){a.errosState&&l(a.errosState.erros)}),[a.errosState]),(0,o.useEffect)((function(){d&&s(d)}),[d]),(0,p.jsxs)(r.Z,{className:"mui-root",children:[(0,p.jsx)(r.Z,{className:"erro-container",children:u&&u.map((function(e,t){return(0,p.jsx)(F.Z,{severity:"error",action:(0,p.jsx)(O.Z,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){return a.errosState.setErros(u.filter((function(a,e){return e!==t})))},children:(0,p.jsx)(P.Z,{fontSize:"inherit"})}),sx:{zIndex:1e3},children:e},t)}))}),(0,p.jsx)(x,{tela:a.tela}),(0,p.jsxs)(r.Z,{className:"pagina-padrao-container",children:[(0,p.jsx)(Y,{recarregarTodasImgs:d}),a.children]})]})}},7781:function(a,e,t){"use strict";t.r(e),t.d(e,{default:function(){return w}});var n=t(9439),o=t(2791),r=t(7892),s=t.n(r),i=t(4056),c=t(4554),u=t(5987),l=t(1413),d=t(4750),m=t(4639),f=t(1652),h=t(8443),g=(t(3918),t(6934)),p=t(1687),v=t(184),x=["day","selectedDay"],Z=(0,g.ZP)(m.H,{shouldForwardProp:function(a){return"customColor"!==a}})((function(a){a.theme;var e=a.customColor;return(0,l.Z)({},e&&{backgroundColor:"#FFFFFF",border:"2px solid #099250",color:"#000","&:hover, &:focus":{backgroundColor:"#cccccc"}})}));function j(a){var e=s()(a).toDate(),t=e.getDate()<10?"0"+e.getDate():e.getDate(),n=e.getMonth()<10?"0"+(e.getMonth()+1):e.getMonth()+1;return e.getFullYear()+"-"+n+"-"+t}function b(a){var e=a.day,t=(a.selectedDay,(0,u.Z)(a,x)),n=j(s()(e).toDate()),o=a.diasComAulas.includes(n)?"#FF5722":null;return(0,v.jsx)(Z,(0,l.Z)((0,l.Z)({},t),{},{day:e,customColor:o,custom:!0}))}var N=function(a){var e=a.stateData,t=e.data,r=e.setData,i=(0,o.useState)([]),c=(0,n.Z)(i,2),u=c[0],m=c[1];function g(){var e=j(a.stateData.data);p.Z.get("/pedidos/pedidos-por-mes-id-usuario?fkUsuario=".concat(sessionStorage.ID,"&data=").concat(e),{headers:{Authorization:"Bearer ".concat(sessionStorage.TOKEN)}}).then((function(a){var e=a.data.map((function(a){return a.dataAula.substring(0,10)}));m(e)})).catch((function(a){}))}return(0,o.useEffect)((function(){g()}),[t]),(0,v.jsx)(f._,{adapterLocale:"pt-br",dateAdapter:d.y,children:(0,v.jsx)(h.W,{defaultValue:s()(t),value:s()(t),showDaysOutsideCurrentMonth:!0,onChange:function(a){r(a)},onMonthChange:function(a){(new Date).getMonth()===a.toDate().getMonth()?r(s()(new Date)):r(a),g()},slots:{day:function(a){return(0,v.jsx)(b,(0,l.Z)((0,l.Z)({},a),{},{diasComAulas:u}))}}})})},D=t(890),C=t(886),M=t(6151),_=t.p+"static/media/search.a27091ef0c45faf8a66e.png",S=t(3044);var I=function(a){return(0,v.jsxs)(c.Z,{className:"containerItem",children:[(0,v.jsx)(c.Z,{className:"fotoContainer",children:(0,v.jsx)(S.Z,{children:a.nome[0]})}),(0,v.jsxs)(c.Z,{className:"conteudoContainer",children:[(0,v.jsxs)(c.Z,{className:"inicioCard",children:[(0,v.jsx)(D.Z,{className:"nomeC",children:a.nome}),(0,v.jsx)(D.Z,{className:"instC",children:a.instrumento})]}),(0,v.jsxs)(c.Z,{className:"fimCard",children:[(0,v.jsx)(D.Z,{className:"hr",children:"Horario:"}),(0,v.jsx)(D.Z,{className:"hrValue",children:a.horario})]})]})]})};t(7577);var E=function(a){var e=a.dia,t=sessionStorage.ID,r=(0,o.useState)(),s=(0,n.Z)(r,2),i=s[0],u=s[1];function l(a){return((a=new Date(a)).getHours()<10?"0"+a.getHours():a.getHours())+":"+(a.getMinutes()<10?"0"+a.getMinutes():a.getMinutes())}return(0,o.useEffect)((function(){u(),function(){var a=e.$d.getDate()<10?"0"+e.$d.getDate():e.$d.getDate(),n=e.$d.getMonth()<10?"0"+(e.$d.getMonth()+1):e.$d.getMonth()+1;a=e.$d.getFullYear()+"-"+n+"-"+a,p.Z.get("/pedidos/pedidos-por-data-id-usuario?fkUsuario=".concat(t,"&data=").concat(a),{headers:{Authorization:"Bearer ".concat(sessionStorage.TOKEN)}}).then((function(a){var e=[],n=a.data;console.log(t),n.map((function(a){e.push({id:a.id,nome:"Professor"==sessionStorage.CATEGORIA?a.aluno.nome:a.professor.nome,instrumento:a.aula.instrumento.nome,horario:l(a.dataAula)})})),u(e)})).catch((function(a){}))}()}),[a]),(0,v.jsx)(c.Z,{className:"containerLista",children:i?i.map((function(a){return(0,v.jsx)(I,{nome:a.nome,instrumento:a.instrumento,horario:a.horario},a.id)})):null})};var y=function(a){var e=a.stateData,t=e.data;return e.setData,(0,v.jsxs)(c.Z,{className:"container",children:[(0,v.jsxs)(c.Z,{className:"topo",children:[(0,v.jsxs)(D.Z,{className:"cabecalho",children:["Aulas em ",t.$D," de"," ",t.$d.toLocaleString("pt-br",{month:"long"})]}),(0,v.jsxs)(c.Z,{className:"filtro",children:[(0,v.jsx)(C.ZP,{className:"input_filtro"}),(0,v.jsx)(M.Z,{variant:"text",className:"botao",children:(0,v.jsx)("img",{className:"lupa",src:_})})]})]}),(0,v.jsx)(c.Z,{className:"aulas",children:(0,v.jsx)(E,{dia:t})})]})};var w=function(){var a=o.useState(s()(new Date)),e=(0,n.Z)(a,2),t=e[0],r=e[1];return(0,v.jsx)(i.Z,{tela:"agenda",children:(0,v.jsxs)(c.Z,{className:"pagina-container",children:[(0,v.jsx)(c.Z,{className:"pagina-conteudo",children:(0,v.jsx)(y,{stateData:{data:t,setData:r}})}),(0,v.jsx)(c.Z,{className:"calendar",children:(0,v.jsx)(N,{stateData:{data:t,setData:r}})})]})})}},1659:function(a,e,t){"use strict";t.d(e,{db:function(){return r},t:function(){return s}});var n=t(3897),o=(t(2806),t(5778),n.Z.initializeApp({apiKey:"AIzaSyBlrwBDwFdwkutdVO2Ilg6KUPnFFwKWD2k",authDomain:"chat-harmonyo.firebaseapp.com",projectId:"chat-harmonyo",storageBucket:"chat-harmonyo.appspot.com",messagingSenderId:"295019787606",appId:"1:295019787606:web:eb01ac75f11c05b72d92f7",measurementId:"G-2K9ZW7N0C1"})),r=o.firestore(),s=o.storage("gs://chat-harmonyo.appspot.com/")},7577:function(a,e,t){"use strict";t.d(e,{HQ:function(){return l},Vr:function(){return r},dp:function(){return u},gi:function(){return s},sR:function(){return c},ve:function(){return i}});var n=t(1978),o=t(1659);function r(a){if(null==a)return"00/00/0000";var e=new n.EK(a.seconds,a.nanoseconds).toDate();return(e.getDate()<10?"0"+e.getDate():e.getDate())+"/"+(e.getMonth()<10?"0"+e.getMonth():e.getMonth())+"/"+e.getFullYear()}function s(a){var e=new Date(a);return(e.getDate()<10?"0"+e.getDate():e.getDate())+"/"+(e.getMonth()<10?"0"+e.getMonth():e.getMonth())+"/"+e.getFullYear()}function i(a){if(null==a)return"00/00/0000";var e=new n.EK(a.seconds,a.nanoseconds).toDate();return(e.getHours()<10?"0"+e.getHours():e.getHours())+":"+(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes())}function c(a,e){var t=Number(sessionStorage.getItem("ID")),r=a,s=(0,n.Bt)(),i={idEnviou:t,timestamp:s,texto:a,lida:!1};o.db.doc("chats/".concat(e)).collection("mensagens").add(i).then((function(){var a=document.getElementById("scroll");a.scrollTop=a.scrollHeight})),o.db.collection("chats").doc(e).update({ultimaMensagem:r,timestamp:s})}function u(a){o.db.doc("chats/".concat(a)).collection("mensagens").where("idEnviou","!=",Number(sessionStorage.getItem("ID"))).where("lida","==",!1).get().then((function(a){a.forEach((function(a){a.ref.update({lida:!0})}))}))}function l(a){var e=a.idConversa;delete a.idConversa;var t=(0,n.Bt)();a.timestamp=t,o.db.doc("chats/".concat(e)).collection("denuncia").add(a).then((function(){o.db.doc("chats/".concat(e)).update({bloqueado:!0,timestamp:t,ultimaMensagem:"Chat bloqueado!"}).then((function(){alert("Denuncia salva!"),window.location.reload()}))})).catch((function(a){console.log(a)}))}},3918:function(a,e,t){a.exports=function(a){"use strict";function e(a){return a&&"object"==typeof a&&"default"in a?a:{default:a}}var t=e(a),n={name:"pt-br",weekdays:"domingo_segunda-feira_ter\xe7a-feira_quarta-feira_quinta-feira_sexta-feira_s\xe1bado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_s\xe1b".split("_"),weekdaysMin:"Do_2\xaa_3\xaa_4\xaa_5\xaa_6\xaa_S\xe1".split("_"),months:"janeiro_fevereiro_mar\xe7o_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),ordinal:function(a){return a+"\xba"},formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [\xe0s] HH:mm",LLLL:"dddd, D [de] MMMM [de] YYYY [\xe0s] HH:mm"},relativeTime:{future:"em %s",past:"h\xe1 %s",s:"poucos segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um m\xeas",MM:"%d meses",y:"um ano",yy:"%d anos"}};return t.default.locale(n,null,!0),n}(t(7892))},5987:function(a,e,t){"use strict";t.d(e,{Z:function(){return o}});var n=t(3366);function o(a,e){if(null==a)return{};var t,o,r=(0,n.Z)(a,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(a);for(o=0;o<s.length;o++)t=s[o],e.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(a,t)&&(r[t]=a[t])}return r}},1978:function(a,e,t){"use strict";t.d(e,{Bt:function(){return n.Bt},EK:function(){return n.EK},IO:function(){return n.IO},PL:function(){return n.PL},Xo:function(){return n.Xo},ar:function(){return n.ar},cf:function(){return n.cf},hJ:function(){return n.hJ},or:function(){return n.or},xD:function(){return n.xD}});var n=t(3577)}}]);
//# sourceMappingURL=457.6932e2d7.chunk.js.map