"use strict";(self.webpackChunkharmonyo=self.webpackChunkharmonyo||[]).push([[539],{1399:function(e,a,t){t.d(a,{Z:function(){return Z}});var o=t(1413),n=t(9439),s=t(2791),r=t(4554),i=t(6151),c=t(3827),l=t(890),d=t(8316),u=t(3006),m=t(9823),f=t(3345),h=t(1687),p=t(184);var Z=function(e){var a=s.useState(!1),t=(0,n.Z)(a,2),Z=t[0],v=t[1],x=function(){return v(!1)},g=s.useState(0),j=(0,n.Z)(g,2),N=j[0],C=j[1],S=e.stateUsuario,b=(0,s.useState)({dadosEnviar:!1}),A=(0,n.Z)(b,2),k=A[0],w=A[1],P=(0,s.useState)(""),D=(0,n.Z)(P,2),E=D[0],F=D[1],I=(0,s.useState)(!1),y=(0,n.Z)(I,2),R=y[0],z=y[1];function M(){var a={usuarioAvaliadorId:parseInt(sessionStorage.ID),valor:N,comentario:E,pedidoId:e.stateUsuario.id};console.log(a);var t=0;t="Professor"===sessionStorage.CATEGORIA?e.stateUsuario.aluno.id:e.stateUsuario.professor.id,h.Z.post("/usuarios/".concat(t,"/avaliacoes"),a,{headers:{Authorization:"Bearer ".concat(sessionStorage.TOKEN)}}).then((function(e){alert("Avalia\xe7\xe3o feita com sucesso!"),x()})).catch((function(e){console.log(e)}))}h.Z.get("/usuarios/".concat(e.stateUsuario.id,"/").concat(sessionStorage.ID),{headers:{Authorization:"Bearer ".concat(sessionStorage.TOKEN)}}).then((function(e){z(e.data)}));var T="Professor"===sessionStorage.CATEGORIA?S.aluno.id:S.professor.id,L="Professor"===sessionStorage.CATEGORIA?S.aluno.nome.charAt(0):S.professor.nome.charAt(0);return R?(0,p.jsx)(p.Fragment,{children:(0,p.jsx)(r.Z,{className:"modal",children:(0,p.jsx)(r.Z,{className:"avaliado",children:(0,p.jsx)(r.Z,{className:"box-avaliado",children:"Avaliado"})})})}):(0,p.jsxs)(r.Z,{className:"modal",children:[(0,p.jsx)(i.Z,{className:"modal-button-open",onClick:function(){return v(!0)},children:"Avaliar Aula"}),(0,p.jsx)(c.Z,{open:Z,onClose:x,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,p.jsxs)(r.Z,{className:"modal-avaliacao",children:[(0,p.jsxs)(r.Z,{className:"modal-area",children:[(0,p.jsxs)(r.Z,{className:"modal-head",children:[(0,p.jsx)(f.Z,{id:T,nome:L,sx:{width:90,height:90,fontSize:35}}),(0,p.jsxs)(r.Z,{className:"modal-usuario",children:[(0,p.jsx)(l.Z,{id:"modal-modal-title",variant:"h8",component:"h2",children:"Professor"===sessionStorage.CATEGORIA?S.aluno.nome:S.professor.nome}),(0,p.jsxs)(r.Z,{className:"avaliacao-usuario",children:[(0,p.jsx)(d.Z,{className:"valor_avaliacao",value:N,precision:1,size:"medium",onChange:function(e,a){C(a)}}),(0,p.jsx)(r.Z,{className:"avaliacao-numero",children:N})]})]})]}),(0,p.jsx)(r.Z,{className:"modal-close",children:(0,p.jsx)(i.Z,{className:"button-close",onClick:x,children:(0,p.jsx)(m.Z,{})})})]}),(0,p.jsxs)(r.Z,{className:"modal-body",children:[(0,p.jsx)(r.Z,{className:"box-text-input",children:(0,p.jsx)(u.Z,{className:"comentario_avaliacao",onChange:function(e){return F(e.target.value)},multiline:!0,rows:6})}),(0,p.jsx)(i.Z,{onClick:function(){(0===N?(alert("Por favor, avalie o usu\xe1rio!"),1):E.length<=3&&(alert("Por favor, escreva um coment\xe1rio!"),1))||w((0,o.Z)((0,o.Z)({},k),{},{dadosEnviar:M()}))},className:"modal-button",children:"Avaliar"})]})]})})]})}},2890:function(e,a,t){t.r(a),t.d(a,{default:function(){return Ie}});var o=t(9439),n=t(2791),s=t(4056),r=t(4554),i=t(9164),c=t(890),l=t(1413),d=t(4223),u=t(184),m=(0,d.Z)((0,u.jsx)("path",{d:"M19 4h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 16H5V10h14v10zm0-12H5V6h14v2zM9 14H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2zm-8 4H7v-2h2v2zm4 0h-2v-2h2v2zm4 0h-2v-2h2v2z"}),"CalendarMonthOutlined"),f=t(6151),h=t(41),p=t(6117),Z=t(7054),v=t(4913);function x(e){return e.substring(2).toLowerCase()}var g=function(e){var a=e.children,t=e.disableReactTree,o=void 0!==t&&t,s=e.mouseEvent,r=void 0===s?"onClick":s,i=e.onClickAway,c=e.touchEvent,l=void 0===c?"onTouchEnd":c,d=n.useRef(!1),m=n.useRef(null),f=n.useRef(!1),h=n.useRef(!1);n.useEffect((function(){return setTimeout((function(){f.current=!0}),0),function(){f.current=!1}}),[]);var g=(0,p.Z)(a.ref,m),j=(0,Z.Z)((function(e){var a=h.current;h.current=!1;var t=(0,v.Z)(m.current);!f.current||!m.current||"clientX"in e&&function(e,a){return a.documentElement.clientWidth<e.clientX||a.documentElement.clientHeight<e.clientY}(e,t)||(d.current?d.current=!1:(e.composedPath?e.composedPath().indexOf(m.current)>-1:!t.documentElement.contains(e.target)||m.current.contains(e.target))||!o&&a||i(e))})),N=function(e){return function(t){h.current=!0;var o=a.props[e];o&&o(t)}},C={ref:g};return!1!==l&&(C[l]=N(l)),n.useEffect((function(){if(!1!==l){var e=x(l),a=(0,v.Z)(m.current),t=function(){d.current=!0};return a.addEventListener(e,j),a.addEventListener("touchmove",t),function(){a.removeEventListener(e,j),a.removeEventListener("touchmove",t)}}}),[j,l]),!1!==r&&(C[r]=N(r)),n.useEffect((function(){if(!1!==r){var e=x(r),a=(0,v.Z)(m.current);return a.addEventListener(e,j),function(){a.removeEventListener(e,j)}}}),[j,r]),(0,u.jsx)(n.Fragment,{children:n.cloneElement(a,C)})},j=t(4942),N=t(7462),C=t(3366),S=t(831),b=t(2466),A=t(4419),k=t(1217),w=t(3457),P=t(6083),D=t(8519),E=t(2173),F=t(1184),I=t(5682),y=["component","direction","spacing","divider","children","className","useFlexGap"],R=(0,E.Z)(),z=(0,w.Z)("div",{name:"MuiStack",slot:"Root",overridesResolver:function(e,a){return a.root}});function M(e){return(0,P.Z)({props:e,name:"MuiStack",defaultTheme:R})}function T(e,a){var t=n.Children.toArray(e).filter(Boolean);return t.reduce((function(e,o,s){return e.push(o),s<t.length-1&&e.push(n.cloneElement(a,{key:"separator-".concat(s)})),e}),[])}var L=function(e){var a=e.ownerState,t=e.theme,o=(0,N.Z)({display:"flex",flexDirection:"column"},(0,F.k9)({theme:t},(0,F.P$)({values:a.direction,breakpoints:t.breakpoints.values}),(function(e){return{flexDirection:e}})));if(a.spacing){var n=(0,I.hB)(t),s=Object.keys(t.breakpoints.values).reduce((function(e,t){return("object"===typeof a.spacing&&null!=a.spacing[t]||"object"===typeof a.direction&&null!=a.direction[t])&&(e[t]=!0),e}),{}),r=(0,F.P$)({values:a.direction,base:s}),i=(0,F.P$)({values:a.spacing,base:s});"object"===typeof r&&Object.keys(r).forEach((function(e,a,t){if(!r[e]){var o=a>0?r[t[a-1]]:"column";r[e]=o}}));o=(0,b.Z)(o,(0,F.k9)({theme:t},i,(function(e,t){return a.useFlexGap?{gap:(0,I.NA)(n,e)}:{"& > :not(style):not(style)":{margin:0},"& > :not(style) ~ :not(style)":(0,j.Z)({},"margin".concat((o=t?r[t]:a.direction,{row:"Left","row-reverse":"Right",column:"Top","column-reverse":"Bottom"}[o])),(0,I.NA)(n,e))};var o})))}return o=(0,F.dt)(t.breakpoints,o)};var O=t(6934),W=t(1402),G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.createStyledComponent,t=void 0===a?z:a,o=e.useThemeProps,s=void 0===o?M:o,r=e.componentName,i=void 0===r?"MuiStack":r,c=t(L),l=n.forwardRef((function(e,a){var t=s(e),o=(0,D.Z)(t),n=o.component,r=void 0===n?"div":n,l=o.direction,d=void 0===l?"column":l,m=o.spacing,f=void 0===m?0:m,h=o.divider,p=o.children,Z=o.className,v=o.useFlexGap,x=void 0!==v&&v,g=(0,C.Z)(o,y),j={direction:d,spacing:f,useFlexGap:x},b=(0,A.Z)({root:["root"]},(function(e){return(0,k.Z)(i,e)}),{});return(0,u.jsx)(c,(0,N.Z)({as:r,ownerState:j,ref:a,className:(0,S.Z)(b.root,Z)},g,{children:h?T(p,h):p}))}));return l}({createStyledComponent:(0,O.ZP)("div",{name:"MuiStack",slot:"Root",overridesResolver:function(e,a){return a.root}}),useThemeProps:function(e){return(0,W.Z)({props:e,name:"MuiStack"})}}),H=G,U=t(2022),B=function(e){return e.match(/^([A-Za-z]+)Range(Calendar|Clock)$/)?"multi-panel-UI-view":e.match(/^([A-Za-z]*)(DigitalClock)$/)?"Tall-UI-view":e.match(/^Static([A-Za-z]+)/)||e.match(/^([A-Za-z]+)(Calendar|Clock)$/)?"UI-view":e.match(/^MultiInput([A-Za-z]+)RangeField$/)||e.match(/^([A-Za-z]+)RangePicker$/)?"multi-input-range-field":e.match(/^SingleInput([A-Za-z]+)RangeField$/)?"single-input-range-field":"single-input-field"},V=function(e){return e.includes("DateTime")?"date-time":e.includes("Date")?"date":"time"};function $(e){var a=e.children,t=e.components,o=e.sx,n=new Set,s=new Set;t.forEach((function(e){n.add(B(e)),s.add(V(e))}));var r,i,c=function(e){return"row"===e?n.has("UI-view")||n.has("Tall-UI-view")?3:2:n.has("UI-view")?4:3},l=(0,N.Z)({overflow:"auto",pt:1},o);return t.length>2||n.has("multi-input-range-field")||n.has("single-input-range-field")||n.has("multi-panel-UI-view")||n.has("UI-view")||s.has("date-time")?(r="column",i=c("column")):(r={xs:"column",lg:"row"},i={xs:c("column"),lg:c("row")}),n.has("UI-view")||(l=n.has("single-input-range-field")?s.has("date-time")?(0,N.Z)({},l,(0,j.Z)({},"& > .".concat(U.Z.root),{minWidth:{xs:300,md:400}})):(0,N.Z)({},l,(0,j.Z)({},"& > .".concat(U.Z.root),{minWidth:300})):s.has("date-time")?(0,N.Z)({},l,(0,j.Z)({},"& > .".concat(U.Z.root),{minWidth:270})):(0,N.Z)({},l,(0,j.Z)({},"& > .".concat(U.Z.root),{minWidth:200}))),(0,u.jsx)(H,{direction:r,spacing:i,sx:l,children:a})}var Y=t(1652),K=t(4750),_=t(5185),X=t(7892),J=t.n(X);var q=function(e){var a=n.useState(null),t=(0,o.Z)(a,2),s=t[0],i=t[1],d=function(e){i(s?null:e.currentTarget)},p=Boolean(s),Z=p?"simple-popper":void 0,v=n.useState(null),x=(0,o.Z)(v,2),j=x[0],N=x[1],C=n.useState(null),S=(0,o.Z)(C,2),b=S[0],A=S[1];return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsx)(f.Z,{onClick:d,className:"button",children:(0,u.jsx)(m,{sx:{color:"black"}})}),(0,u.jsx)(h.Z,{className:"calen-popper",id:Z,open:p,anchorEl:s,placement:"bottom",children:(0,u.jsx)(g,{onClickAway:d,children:(0,u.jsx)(r.Z,{className:"calen-popup",children:(0,u.jsx)(Y._,{dateAdapter:K.y,children:(0,u.jsx)($,{components:["DatePicker","DatePicker"],children:(0,u.jsxs)(r.Z,{className:"calen-popup-body",children:[(0,u.jsx)(c.Z,{children:"Selecione o intevalo de dias:"}),(0,u.jsx)(_.M,{className:"calen-popup-item",label:"In\xedcio",value:j,onChange:function(e){return N(e)}}),(0,u.jsx)(_.M,{className:"calen-popup-item",label:"Fim",value:b,onChange:function(e){return A(e)}}),(0,u.jsx)(f.Z,{onClick:function(){if(null!==j&&null!==b&&j<=b){var a=J()(j).format("YYYY-MM-DD"),t=J()(b).format("YYYY-MM-DD");e.filtroState.setFiltro((0,l.Z)((0,l.Z)({},e.filtroState.filtro),{},{dataInicio:a,dataFim:t})),console.log(e.filtroState.filtro)}else alert("Data de in\xedcio deve ser menor ou igual a data de fim")},className:"button-submit",children:"Aplicar"})]})})})})})})]})},Q=t(2672),ee=t(4479);var ae=function(e){var a=n.useState(null),t=(0,o.Z)(a,2),s=t[0],i=t[1],d=function(e){i(s?null:e.currentTarget)},m=Boolean(s),p=m?"simple-popper":void 0,Z=e.filtroState,v=Z.filtro,x=Z.setFiltro,j=n.useState({semFilto:!0,pendente:!1,confirmado:!1,cancelado:!1,recusado:!1,concluido:!1,aguardando:!1}),N=(0,o.Z)(j,2),C=N[0],S=N[1],b=C.semFilto,A=C.pendente,k=C.confirmado,w=C.cancelado,P=C.recusado,D=C.concluido,E=C.aguardando;function F(e){switch(e){case"Sem Filtro":return S({semFilto:!0,pendente:!1,confirmado:!1,cancelado:!1,recusado:!1,concluido:!1,aguardando:!1}),e;case"Pendente":return S({semFilto:!1,pendente:!0,confirmado:!1,cancelado:!1,recusado:!1,concluido:!1,aguardando:!1}),e;case"Confirmado":return S({semFilto:!1,pendente:!1,confirmado:!0,cancelado:!1,recusado:!1,concluido:!1,aguardando:!1}),e;case"Cancelado":return S({semFilto:!1,pendente:!1,confirmado:!1,cancelado:!0,recusado:!1,concluido:!1,aguardando:!1}),e;case"Recusado":return S({semFilto:!1,pendente:!1,confirmado:!1,cancelado:!1,recusado:!0,concluido:!1,aguardando:!1}),e;case"Conclu\xeddo":return S({semFilto:!1,pendente:!1,confirmado:!1,cancelado:!1,recusado:!1,concluido:!0,aguardando:!1}),e;case"Aguardando":return S({semFilto:!1,pendente:!1,confirmado:!1,cancelado:!1,recusado:!1,concluido:!1,aguardando:!0}),e}return e}return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)(r.Z,{className:"modal",children:[(0,u.jsx)(f.Z,{className:"button",id:"basic-button","aria-controls":m?"basic-menu":void 0,"aria-haspopup":"true","aria-expanded":m?"true":void 0,onClick:d,children:(0,u.jsx)(Q.Z,{sx:{color:"black"}})}),(0,u.jsx)(h.Z,{className:"filtro-popper",id:p,open:m,anchorEl:s,placement:"bottom-start",children:(0,u.jsx)(g,{onClickAway:d,children:(0,u.jsxs)(r.Z,{className:"filtro-popup",children:[(0,u.jsxs)(r.Z,{className:"filtro-popup-item",children:[(0,u.jsx)(ee.Z,{color:"success",checked:b,onChange:function(){x((0,l.Z)((0,l.Z)({},v),{},{status:F("Sem Filtro")}))}}),(0,u.jsx)(c.Z,{className:"filtro-popup-text",children:"Sem Filtros"})]}),(0,u.jsxs)(r.Z,{className:"filtro-popup-item",children:[(0,u.jsx)(ee.Z,{color:"success",checked:A,onChange:function(){x((0,l.Z)((0,l.Z)({},v),{},{status:F("Pendente")}))}}),(0,u.jsx)(c.Z,{className:"filtro-popup-text",children:"Pendente"})]}),(0,u.jsxs)(r.Z,{className:"filtro-popup-item",children:[(0,u.jsx)(ee.Z,{color:"success",checked:k,onChange:function(){x((0,l.Z)((0,l.Z)({},v),{},{status:F("Confirmado")}))}}),(0,u.jsx)(c.Z,{className:"filtro-popup-text",children:"Confirmado"})]}),(0,u.jsxs)(r.Z,{className:"filtro-popup-item",children:[(0,u.jsx)(ee.Z,{color:"success",checked:w,onChange:function(){x((0,l.Z)((0,l.Z)({},v),{},{status:F("Cancelado")}))}}),(0,u.jsx)(c.Z,{className:"filtro-popup-text",children:"Cancelado"})]}),(0,u.jsxs)(r.Z,{className:"filtro-popup-item",children:[(0,u.jsx)(ee.Z,{color:"success",checked:P,onChange:function(){x((0,l.Z)((0,l.Z)({},v),{},{status:F("Recusado")}))}}),(0,u.jsx)(c.Z,{className:"filtro-popup-text",children:"Recusado"})]}),(0,u.jsxs)(r.Z,{className:"filtro-popup-item",children:[(0,u.jsx)(ee.Z,{color:"success",checked:D,onChange:function(){x((0,l.Z)((0,l.Z)({},v),{},{status:F("Conclu\xeddo")}))}}),(0,u.jsx)(c.Z,{className:"filtro-popup-text",children:"Conclu\xeddo"})]}),(0,u.jsxs)(r.Z,{className:"filtro-popup-item",children:[(0,u.jsx)(ee.Z,{color:"success",checked:E,onChange:function(){x((0,l.Z)((0,l.Z)({},v),{},{status:F("Aguardando")}))}}),(0,u.jsx)(c.Z,{className:"filtro-popup-text",children:"Aguardando"})]})]})})})]})})},te=t(3006),oe=t(3466),ne=(0,d.Z)((0,u.jsx)("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"SearchOutlined");var se=function(e){var a=n.useState(""),t=(0,o.Z)(a,2),s=t[0],r=t[1];return(0,n.useEffect)((function(){e.filtroState.setFiltro((0,l.Z)((0,l.Z)({},e.filtroState.filtro),{},{nomeFiltro:s}))}),[s]),(0,u.jsx)(te.Z,{placeholder:"Filtrar",className:"input_filtro",name:"input_filtro",value:s,onChange:function(e){r(e.target.value)},InputProps:{endAdornment:(0,u.jsx)(oe.Z,{position:"end",children:(0,u.jsx)(ne,{className:"lupa"})})},variant:"standard"})};var re=function(e){var a=e.filtroState,t=a.filtro,o=a.setFiltro;return(0,u.jsxs)(i.Z,{className:"container",children:[(0,u.jsx)(c.Z,{className:"titulo",children:"Pedidos"}),(0,u.jsxs)(r.Z,{className:"direita",children:[(0,u.jsx)(se,{filtroState:{filtro:t,setFiltro:o}}),(0,u.jsx)(q,{filtroState:{filtro:t,setFiltro:o}}),(0,u.jsx)(ae,{filtroState:{filtro:t,setFiltro:o}})]})]})},ie=t(9281),ce=t(9836),le=t(6890),de=t(5855),ue=t(3994),me=t(3382),fe=t(3345),he=t(7689);var pe=function(e){var a=(0,he.s0)(),t=n.useState(null),s=(0,o.Z)(t,2),i=(s[0],s[1]);return(0,u.jsxs)(r.Z,{onClick:function(){return i(null),void a("/exibicao-perfil?id="+e.id)},className:"perfil-container",children:[(0,u.jsx)(fe.Z,{id:e.id,nome:e.nome.toUpperCase(),className:"avatar"}),(0,u.jsx)(c.Z,{className:"nome",children:e.nome})]},"usuario-pedido-".concat(e.id))};var Ze=function(e){return"Recusado"===e.status||"Cancelado"===e.status?(0,u.jsx)(r.Z,{className:"status recusadoCancelado",children:e.status}):"Confirmado"===e.status?(0,u.jsx)(r.Z,{className:"status confirmado",children:e.status}):"Pendente"===e.status||"Aguardando Pagamento"===e.status?(0,u.jsx)(r.Z,{className:"status pendente",children:e.status}):(0,u.jsx)(r.Z,{className:"status concluido",children:e.status})},ve=t(4165),xe=t(5861),ge=t(3433),je=t(3827),Ne=t(6739),Ce=(0,d.Z)((0,u.jsx)("path",{d:"M4 4h16v12H5.17L4 17.17V4m0-2c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2H4zm2 10h12v2H6v-2zm0-3h12v2H6V9zm0-3h12v2H6V6z"}),"MessageOutlined"),Se=t(1687),be=t(1659),Ae=t(1978),ke=function(e,a){return Se.Z.put(e,a,{headers:{Authorization:"Bearer ".concat(sessionStorage.TOKEN)}})},we=function(e,a){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"confirmar";return(0,u.jsx)(f.Z,{className:"btnModal ".concat(t),onClick:a,children:e})};var Pe=function(e){var a=e.pedido,t=n.useState([]),s=(0,o.Z)(t,2),i=s[0],l=s[1],d=e.errosState.erros,m=function(a){e.errosState.setErros([].concat((0,ge.Z)(d),[a]))},h=function(e,a){switch(e.response.status){case 400:m("Erro ao ".concat(a," pedido!"));break;case 401:m("Voc\xea n\xe3o tem permiss\xe3o para ".concat(a," este pedido!"));break;case 404:m("Pedido n\xe3o encontrado!");break;case 409:m("Voc\xea n\xe3o pode realizar essa a\xe7\xe3o");break;default:m("Erro desconhecido!")}};(0,n.useEffect)((function(){void 0!==a&&l([{id:1,desc:"".concat(a.aluno.nome," fez uma proposta de ").concat(a.aula.instrumento.nome," para ").concat(a.professor.nome," no dia ").concat(new Date(a.dataAula).toLocaleDateString())}])}),[a]);var p=(0,he.s0)(),Z=function(){ke("/pedidos/aceita-pedido",{idPedido:a.id,idUsuario:sessionStorage.ID,motivo:""}).then((function(e){200===e.status&&(m("Pedido confirmado com sucesso!"),p(0))})).catch((function(e){h(e,"confirmar")}))},v=function(){ke("/pedidos/cancela-pedido",{idPedido:a.id,idUsuario:sessionStorage.ID,motivo:""}).then((function(e){200===e.status&&(m("Pedido cancelado com sucesso!"),p(0))})).catch((function(e){h(e,"cancelar")}))},x=function(){ke("/pedidos/recusa-pedido",{idPedido:a.id,idUsuario:sessionStorage.ID,motivo:""}).then((function(e){200===e.status&&(m("Pedido recusado com sucesso!"),p(0))})).catch((function(e){h(e,"recusar")}))},g=function(){ke("/pedidos/conclui-pedido",{idPedido:a.id,idUsuario:sessionStorage.ID,motivo:""}).then((function(e){200===e.status&&(m("Pedido confirmado com sucesso!"),p(0))})).catch((function(e){h(e,"confirmar")}))},j=function(){ke("/pedidos/realiza-pagamento",{idPedido:a.id,idUsuario:sessionStorage.ID,motivo:""}).then((function(e){200===e.status&&(m("Pagamento realizado com sucesso!"),p(0))})).catch((function(e){h(e,"realizar pagamento")}))};function N(){return(N=(0,xe.Z)((0,ve.Z)().mark((function e(){var t,o,n;return(0,ve.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=(0,Ae.IO)((0,Ae.hJ)(be.db,"chats"),(0,Ae.xD)((0,Ae.ar)("idProfessor","==",Number(a.professor.id)),(0,Ae.ar)("idAluno","==",Number(a.aluno.id)))),e.next=3,(0,Ae.PL)(t);case 3:(o=e.sent).empty?(n=(0,Ae.Bt)(),be.db.collection("chats").add({bloqueado:!1,idAluno:Number(a.aluno.id),idProfessor:Number(a.professor.id),nomeAluno:a.aluno.nome.split(" ")[0],nomeProfessor:a.professor.nome.split(" ")[0],timestamp:n,ultimaMensagem:"Envie uma mensagem para iniciar a conversa!"}).then((function(e){e.get().then((function(e){console.log(e.id),p("/chat",{state:{idChatAtivo:e.id,chatAtivo:e.data()}})}))})).catch((function(e){console.error("Error adding document: ",e)}))):p("/chat",{state:{idChatAtivo:o.docs[0].id,chatAtivo:o.docs[0].data()}});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}if(void 0!==a)return(0,u.jsx)(je.Z,{open:e.open,onClose:e.onClose,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,u.jsxs)(r.Z,{className:"containerModal",children:[(0,u.jsxs)(r.Z,{className:"container-historico",children:[(0,u.jsxs)(r.Z,{className:"conteudoTop",children:[(0,u.jsx)(c.Z,{className:"tituloModal",children:"Informa\xe7\xf5es"}),(0,u.jsx)(f.Z,{onClick:function(){e.onClose()},children:(0,u.jsx)(Ne.Z,{className:"icon-color"})})]}),"Aluno"===sessionStorage.CATEGORIA?(0,u.jsx)(pe,{nome:a.professor.nome}):(0,u.jsx)(pe,{nome:a.aluno.nome}),(0,u.jsxs)(r.Z,{className:"tudoConteudo",children:[(0,u.jsxs)(r.Z,{className:"conteudoB1",children:[(0,u.jsx)(c.Z,{className:"tituloDetalhe",children:"Instrumento:"}),(0,u.jsx)(c.Z,{className:"valorDetalhe",children:a.aula.instrumento.nome})]}),(0,u.jsxs)(r.Z,{className:"conteudoB1",children:[(0,u.jsx)(c.Z,{className:"tituloDetalhe",children:"Data: "}),(0,u.jsxs)(c.Z,{className:"valorDetalhe",children:[new Date(a.dataAula).toLocaleDateString()+" \xe0s ",new Date(a.dataAula).getHours()<10?" 0"+new Date(a.dataAula).getHours():new Date(a.dataAula).getHours(),":",new Date(a.dataAula).getMinutes()<10?"0"+new Date(a.dataAula).getMinutes():new Date(a.dataAula).getMinutes()]})]})]}),(0,u.jsxs)(r.Z,{className:"historicoModal",children:[(0,u.jsx)(c.Z,{className:"tituloModal",children:"Hist\xf3rico"}),(0,u.jsx)(r.Z,{className:"historico-lista",children:i.map((function(e){return(0,u.jsx)(c.Z,{className:"descHistorico",children:e.desc})}))})]})]}),(0,u.jsxs)(r.Z,{className:"footerModal",children:["Aguardando Pagamento"===a.status.descricao||"Pendente"===a.status.descricao||"Confirmado"===a.status.descricao?(0,u.jsxs)(f.Z,{className:"msgChat",onClick:function(){return N.apply(this,arguments)},children:[(0,u.jsx)(Ce,{className:"icon-color msg-icon"}),(0,u.jsx)(c.Z,{className:"txtChat",children:"Mandar mensagem"})]}):null,(0,u.jsx)(r.Z,{className:"botoesModal",children:function(e){var t=sessionStorage.CATEGORIA;if("Aluno"===t)switch(e){case"Pendente":return we("Cancelar",v,"cancelar");case"Aguardando Pagamento":return(0,u.jsxs)(u.Fragment,{children:[we("Realizar Pagamento",j,"confirmar"),we("Cancelar",v,"cancelar")]});case"Confirmado":if(new Date>new Date(a.dataAula))return we("Concluir Pedido",g,"aceitar");default:return null}else if("Professor"===t)switch(e){case"Pendente":return(0,u.jsxs)(u.Fragment,{children:[we("Confirmar",Z,"confirmar"),we("Recusar",x,"cancelar")]});case"Aguardando Pagamento":return we("Cancelar",v,"cancelar");default:return null}}(a.status.descricao)})]})]})})},De=t(1399);var Ee=function(e){var a=(0,n.useState)([]),t=(0,o.Z)(a,2),s=t[0],r=t[1],i=e.errosState,c=i.erros,l=i.setErros,d=e.filtroState.filtro;console.log(d);var m="";m="Sem Filtro"===d.status?"/pedidos/usuario/".concat(sessionStorage.ID):"/pedidos/usuario/hashing/".concat(sessionStorage.ID,"?status=").concat(d.status),(0,n.useEffect)((function(){Se.Z.get(m,{headers:{Authorization:"Bearer ".concat(sessionStorage.TOKEN)}}).then((function(e){var a=e.data;""!==a?(a=a.sort((function(e,a){return new Date(a.horaCriacao)-new Date(e.horaCriacao)})),null!==d.dataInicio&&null!==d.dataFim&&(a=a.filter((function(e){var a=new Date(e.dataAula).toLocaleDateString(),t=new Date(d.dataInicio);t.setDate(t.getDate()+1),t=t.toLocaleDateString();var o=new Date(d.dataFim);return o.setDate(o.getDate()+1),o=o.toLocaleDateString(),console.log(a+" / "+t+" / "+o),a>=t&&a<=o}))),"Professor"===sessionStorage.getItem("CATEGORIA")?""!==d.nomeFiltro&&(a=a.filter((function(e){return e.aluno.nome.toLowerCase().includes(d.nomeFiltro.toLowerCase())}))):""!==d.nomeFiltro&&(a=a.filter((function(e){return e.professor.nome.toLowerCase().includes(d.nomeFiltro.toLowerCase())}))),r(a),console.log(a)):r([])}))}),[d]);var h=(0,n.useState)(!1),p=(0,o.Z)(h,2),Z=p[0],v=p[1],x=(0,n.useState)(),g=(0,o.Z)(x,2),j=g[0],N=g[1];return(0,u.jsxs)(ie.Z,{style:{maxHeight:"90%",overflow:"scroll"},children:[(0,u.jsxs)(ce.Z,{stickyHeader:!0,sx:{minWidth:650},"aria-label":"simple table",children:[(0,u.jsx)(le.Z,{className:"head",children:(0,u.jsxs)(de.Z,{children:[(0,u.jsx)(ue.Z,{className:"topCelula",align:"left",children:"Professor"===sessionStorage.getItem("CATEGORIA")?"Aluno":"Professor"}),(0,u.jsx)(ue.Z,{className:"topCelula",align:"center",children:"Instrumento"}),(0,u.jsx)(ue.Z,{className:"topCelula",align:"center",children:"Status"}),(0,u.jsx)(ue.Z,{className:"topCelula",align:"center",children:"Data"}),(0,u.jsx)(ue.Z,{className:"topCelula",align:"center",children:"Valor"}),(0,u.jsx)(ue.Z,{className:"topCelula",align:"center"})]})}),(0,u.jsx)(me.Z,{className:"conteudoTabela",children:0!==s.length?s.map((function(e){return(0,u.jsxs)(de.Z,{sx:{"&:last-child td, &:last-child th":{border:0}},children:[(0,u.jsx)(ue.Z,{className:"bodyCelula",align:"left",children:(0,u.jsx)(pe,{id:"Professor"===sessionStorage.CATEGORIA?e.aluno.id:e.professor.id,nome:"Professor"===sessionStorage.CATEGORIA?e.aluno.nome:e.professor.nome})}),(0,u.jsx)(ue.Z,{className:"bodyCelula",align:"center",children:e.aula.instrumento.nome}),(0,u.jsx)(ue.Z,{className:"bodyCelula",align:"center",children:(0,u.jsx)(Ze,{status:e.status.descricao})}),(0,u.jsx)(ue.Z,{className:"bodyCelula",align:"center",children:(a=e.dataAula,new Date(a).toLocaleDateString())}),(0,u.jsxs)(ue.Z,{className:"bodyCelula",style:{fontWeight:"bold"},align:"left",children:["R$ ",e.aula.valorAula.toFixed(2)]}),(0,u.jsx)(ue.Z,{className:"bodyCelula",align:"center",children:"Conclu\xeddo"===e.status.descricao?(0,u.jsx)(De.Z,{stateUsuario:e}):(0,u.jsx)(f.Z,{variant:"outlined",className:"botao",onClick:function(){var a;a=e,console.log(a),v(!0),N(a)},children:" Detalhes"})})]},e.id);var a})):(0,u.jsx)(de.Z,{children:(0,u.jsx)(ue.Z,{colSpan:6,className:"bodyCelula",align:"center",children:"Nenhum pedido encontrado"})})})]}),(0,u.jsx)(Pe,{open:Z,onClose:function(){return v(!1)},pedido:j,errosState:{erros:c,setErros:l}})]})},Fe=t(2703);var Ie=function(){var e=n.useState([]),a=(0,o.Z)(e,2),t=a[0],i=a[1],c=(0,he.s0)();(0,n.useEffect)((function(){(0,Fe.Wi)()&&c(-1)}),[]);var l=n.useState({status:"Sem Filtro",dataInicio:null,dataFim:null,nomeFiltro:""}),d=(0,o.Z)(l,2),m=d[0],f=d[1];return(0,u.jsx)(s.Z,{tela:"pedidos",errosState:{erros:t,setErros:i},children:(0,u.jsx)(r.Z,{className:"pagina-container",children:(0,u.jsxs)(r.Z,{className:"pagina-conteudo",children:[(0,u.jsx)(re,{filtroState:{filtro:m,setFiltro:f}}),(0,u.jsx)(r.Z,{className:"divider"}),(0,u.jsx)(Ee,{errosState:{erros:t,setErros:i},filtroState:{filtro:m,setFiltro:f}})]})})})}},9823:function(e,a,t){var o=t(4836);a.Z=void 0;var n=o(t(5649)),s=t(184),r=(0,n.default)((0,s.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");a.Z=r},2672:function(e,a,t){var o=t(4836);a.Z=void 0;var n=o(t(5649)),s=t(184),r=(0,n.default)((0,s.jsx)("path",{d:"M7 6h10l-5.01 6.3L7 6zm-2.75-.39C6.27 8.2 10 13 10 13v6c0 .55.45 1 1 1h2c.55 0 1-.45 1-1v-6s3.72-4.8 5.74-7.39c.51-.66.04-1.61-.79-1.61H5.04c-.83 0-1.3.95-.79 1.61z"}),"FilterAltOutlined");a.Z=r},9164:function(e,a,t){t.d(a,{Z:function(){return S}});var o=t(4942),n=t(3366),s=t(7462),r=t(2791),i=t(831),c=t(1122),l=t(1217),d=t(4419),u=t(6083),m=t(3457),f=t(2173),h=t(184),p=["className","component","disableGutters","fixed","maxWidth","classes"],Z=(0,f.Z)(),v=(0,m.Z)("div",{name:"MuiContainer",slot:"Root",overridesResolver:function(e,a){var t=e.ownerState;return[a.root,a["maxWidth".concat((0,c.Z)(String(t.maxWidth)))],t.fixed&&a.fixed,t.disableGutters&&a.disableGutters]}}),x=function(e){return(0,u.Z)({props:e,name:"MuiContainer",defaultTheme:Z})};var g=t(4036),j=t(6934),N=t(1402),C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=e.createStyledComponent,t=void 0===a?v:a,u=e.useThemeProps,m=void 0===u?x:u,f=e.componentName,Z=void 0===f?"MuiContainer":f,g=t((function(e){var a=e.theme,t=e.ownerState;return(0,s.Z)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!t.disableGutters&&(0,o.Z)({paddingLeft:a.spacing(2),paddingRight:a.spacing(2)},a.breakpoints.up("sm"),{paddingLeft:a.spacing(3),paddingRight:a.spacing(3)}))}),(function(e){var a=e.theme;return e.ownerState.fixed&&Object.keys(a.breakpoints.values).reduce((function(e,t){var o=t,n=a.breakpoints.values[o];return 0!==n&&(e[a.breakpoints.up(o)]={maxWidth:"".concat(n).concat(a.breakpoints.unit)}),e}),{})}),(function(e){var a=e.theme,t=e.ownerState;return(0,s.Z)({},"xs"===t.maxWidth&&(0,o.Z)({},a.breakpoints.up("xs"),{maxWidth:Math.max(a.breakpoints.values.xs,444)}),t.maxWidth&&"xs"!==t.maxWidth&&(0,o.Z)({},a.breakpoints.up(t.maxWidth),{maxWidth:"".concat(a.breakpoints.values[t.maxWidth]).concat(a.breakpoints.unit)}))})),j=r.forwardRef((function(e,a){var t=m(e),o=t.className,r=t.component,u=void 0===r?"div":r,f=t.disableGutters,v=void 0!==f&&f,x=t.fixed,j=void 0!==x&&x,N=t.maxWidth,C=void 0===N?"lg":N,S=(0,n.Z)(t,p),b=(0,s.Z)({},t,{component:u,disableGutters:v,fixed:j,maxWidth:C}),A=function(e,a){var t=e.classes,o=e.fixed,n=e.disableGutters,s=e.maxWidth,r={root:["root",s&&"maxWidth".concat((0,c.Z)(String(s))),o&&"fixed",n&&"disableGutters"]};return(0,d.Z)(r,(function(e){return(0,l.Z)(a,e)}),t)}(b,Z);return(0,h.jsx)(g,(0,s.Z)({as:u,ownerState:b,className:(0,i.Z)(A.root,o),ref:a},S))}));return j}({createStyledComponent:(0,j.ZP)("div",{name:"MuiContainer",slot:"Root",overridesResolver:function(e,a){var t=e.ownerState;return[a.root,a["maxWidth".concat((0,g.Z)(String(t.maxWidth)))],t.fixed&&a.fixed,t.disableGutters&&a.disableGutters]}}),useThemeProps:function(e){return(0,N.Z)({props:e,name:"MuiContainer"})}}),S=C},3457:function(e,a,t){var o=(0,t(4046).ZP)();a.Z=o},1978:function(e,a,t){t.d(a,{Bt:function(){return o.Bt},EK:function(){return o.EK},IO:function(){return o.IO},PL:function(){return o.PL},Xo:function(){return o.Xo},ar:function(){return o.ar},cf:function(){return o.cf},hJ:function(){return o.hJ},or:function(){return o.or},xD:function(){return o.xD}});var o=t(3577)}}]);
//# sourceMappingURL=539.b91d597e.chunk.js.map