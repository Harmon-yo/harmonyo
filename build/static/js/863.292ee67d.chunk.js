"use strict";(self.webpackChunkharmonyo=self.webpackChunkharmonyo||[]).push([[863],{9084:function(e,n,a){a.d(n,{Z:function(){return o}});a(2791);var t=a(4554),s=a(184);var o=function(e){return(0,s.jsx)(t.Z,{className:"card ".concat(e.className),sx:e.sx,id:e.id,onClick:e.onClick,children:e.children})}},1497:function(e,n,a){a.r(n),a.d(n,{default:function(){return L}});var t=a(3433),s=a(9439),o=a(4056),i=a(4554),r=a(2791),l=a(7689),c=a(890),d=a(4721),u=a(9084),m=a(1687),h=a(3345),f=a(184);var p=function(e){var n=e.idProfessor,a=(0,r.useState)(""),t=(0,s.Z)(a,2),o=t[0],l=t[1],p=e.instrumento,x=null===p?"00,00":2===p.valor.length?null:"".concat(p.valor,",00");return(0,r.useEffect)((function(){var e;(e="/professores/".concat(n),m.Z.get(e,{headers:{Authorization:"Bearer ".concat(sessionStorage.TOKEN)}})).then((function(e){var n=e.data;l(n.nome)})).catch((function(){console.log("Erro ao obter professor")}))}),[]),(0,f.jsxs)(u.Z,{className:"card-usuario-info",children:[(0,f.jsxs)(i.Z,{className:"usuario-info",children:[(0,f.jsx)(h.Z,{id:n,nome:o,className:"usuario-info-avatar"}),(0,f.jsxs)(i.Z,{className:"duracao-container",children:[(0,f.jsx)(c.Z,{children:"Dura\xe7\xe3o"}),(0,f.jsx)(c.Z,{children:"1 Hora"})]})]}),(0,f.jsx)(c.Z,{className:"nome-usuario",children:o}),(0,f.jsxs)(i.Z,{className:"pedido-info-container",children:[(0,f.jsxs)(i.Z,{className:"item-pedido",children:[null===p?null:(0,f.jsx)(c.Z,{className:"item-nome",children:p.nome}),null===p?null:(0,f.jsxs)(c.Z,{className:"item-valor",children:["R$ ",x]})]}),(0,f.jsx)(d.Z,{className:"divider"}),(0,f.jsxs)(i.Z,{className:"item-pedido",children:[(0,f.jsx)(c.Z,{className:"item-nome",children:"Total"}),(0,f.jsxs)(c.Z,{className:"item-valor",children:["R$ ",x]})]})]})]})},x=a(242),j=a(4512),Z=a(5825),v=a(6151),g=a(3239),S=a(4750),N=a(1652),D=a(5185),E=a(8034),w=a(7892),b=a.n(w),y=(a(3918),a(4253)),C=a(3320);b().extend(y),b().extend(C);var k=function(e){var n=e.handleClicks,a=n.handleClickDia,t=n.handleClickHorario,s=e.diaEHoraEscolhidos,o=s.diaEscolhido,r=s.horarioEscolhido,l=e.diasIndisponiveis;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsxs)(i.Z,{className:"item-pedido",children:[(0,f.jsx)(c.Z,{className:"item-valor",children:"Selecione um dia:"}),(0,f.jsx)(N._,{dateAdapter:S.y,sx:{height:"10% !important"},adapterLocale:"pt-br",children:(0,f.jsx)(D.M,{minDate:b()(new Date),maxDate:b()((new Date).setMonth((new Date).getMonth()+1)),onChange:a,value:o,slotProps:{textField:{size:"small"}},dayOfWeekFormatter:function(e){return"".concat(function(e){switch(e){case"2\xaa":return"Seg";case"3\xaa":return"Ter";case"4\xaa":return"Qua";case"5\xaa":return"Qui";case"6\xaa":return"Sex";case"S\xe1":return"Sab";case"Do":return"Dom"}}(e))},shouldDisableDate:function(e){return l.some((function(n){return b()(e.$d).isSame(b()(n.inicio))}))}})})]}),(0,f.jsxs)(i.Z,{className:"item-pedido",children:[(0,f.jsx)(c.Z,{className:"item-valor",children:"Selecione um hor\xe1rio:"}),(0,f.jsx)(N._,{dateAdapter:S.y,adapterLocale:"pt-br",children:(0,f.jsx)(E.j,{minTime:b()().hour(8).minute(0).second(0),maxTime:b()().hour(22).minute(0).second(0),defaultValue:b()(),slotProps:{textField:{size:"small"}},onChange:t,value:r,ampm:!1,shouldDisableTime:function(e){return l.some((function(n){return o.isSame(b()(n.inicio),"day")&&e.isSameOrAfter(b()(n.inicio))&&e.isBefore(b()(n.fim))}))},skipDisabled:!0,disablePast:function(){return o.isSame(b()(),"day")}})})]})]})},I=a(8096),P=a(765),A=a(5523),z=a(4479);var H=function(e){var n=e.instrumentoState,a=n.instrumento,t=n.setInstrumento,s=e.instrumentosDisponiveis;return(0,f.jsx)(I.Z,{sx:{width:"80%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},onChange:function(e){e.preventDefault(),t(s.find((function(n){return n.nome===e.target.value})))},value:a,children:(0,f.jsx)(P.Z,{"aria-labelledby":"demo-radio-buttons-group-label",defaultValue:"female",name:"radio-buttons-group",sx:{width:"100%",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"},children:s.map((function(e){return(0,f.jsx)(A.Z,{value:e.nome,disableTypography:!0,control:(0,f.jsx)(z.Z,{}),sx:{width:"100%"},label:(0,f.jsxs)(i.Z,{sx:{width:"100% !important",display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center",margin:"0 !important"},children:[(0,f.jsx)(c.Z,{children:e.nome}),(0,f.jsxs)(c.Z,{children:["R$ ",e.valor]})]})},"instrumento-".concat(e.nome))}))})})},T=function(e){return m.Z.get(e,{headers:{Authorization:"Bearer ".concat(sessionStorage.TOKEN)}})};var F=function(e){var n=e.stepsState,a=n.step,o=n.steps,d=n.setStep,h=e.instrumentoState,p=h.instrumento,S=h.setInstrumento,N=e.adicionarErro,D=(0,l.s0)(),E=(0,r.useState)(function(){var e=b()(new Date),n=e.minute().toString();return 1!==n.length&&(n=n[1]),!n.includes(0)&&!n.includes(5)&&n<5?e=e.add(5-n,"minute"):!n.includes(0)&&!n.includes(5)&&n>5&&(e=e.add(10-n,"minute")),e}()),w=(0,s.Z)(E,2),y=w[0],C=w[1],I=(0,r.useState)(b()(y)),P=(0,s.Z)(I,2),A=P[0],z=P[1],F=(0,r.useState)([]),M=(0,s.Z)(F,2),O=M[0],L=M[1],R=(0,r.useState)([]),B=(0,s.Z)(R,2),Y=B[0],$=B[1],K=function(){var e,n;(e="/pedidos",n={alunoId:sessionStorage.getItem("ID"),professorId:new URLSearchParams(window.location.search).get("id"),aulaId:p.id,dataAula:y.format("YYYY-MM-DD HH:mm:ss")},m.Z.post(e,n,{headers:{Authorization:"Bearer ".concat(sessionStorage.TOKEN)}})).then((function(){d(3)})).catch((function(e){console.log(e),N("Erro ao enviar pedido!")}))},V=function(e){return e===o.length-2?"Finalizar":e===o.length?"Ver meus pedidos":"Continuar"}(a);return(0,r.useEffect)((function(){Promise.all([T("/aulas/".concat(e.idProfessor)),T("pedidos/usuario/".concat(e.idProfessor,"/confirmado"))]).then((function(e){var n=(0,s.Z)(e,2),a=n[0],o=n[1],i=a.data,r=o.data;console.log("Aulas:"),console.log(i),console.log("Pedidos:"),console.log(r),function(e){for(var n,a=[],t=0;t<e.length;t++)n=e[t],a.push({id:n.id,nome:n.instrumento.nome,valor:n.valorAula});L(a)}(i),function(e){for(var n,a,s,o=0;o<e.length;o++)n=e[o],(a=new Date(n.dataAula)).setMinutes(a.getMinutes()-55),(s=new Date(n.dataAula)).setHours(s.getHours()+1),$((function(e){return[].concat((0,t.Z)(e),[{inicio:a,fim:s}])}))}(r)}))}),[]),(0,f.jsxs)(u.Z,{className:"card-pedido",children:[(0,f.jsx)(x.Z,{activeStep:a,alternativeLabel:!0,children:o.map((function(e){return(0,f.jsx)(j.Z,{children:(0,f.jsx)(Z.Z,{children:e})},e)}))}),2!==a?(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(c.Z,{className:"pedido-titulo",children:"Escolha o dia e o hor\xe1rio que voc\xea deseja ter a aula"}),(0,f.jsxs)(i.Z,{className:"pedido-form",children:[0===a&&(0,f.jsx)(k,{handleClicks:{handleClickDia:function(e){C(e),z(e)},handleClickHorario:function(e){e=(e=e.second(0).millisecond(0)).day(y.day()).month(y.month()).year(y.year()),C(e),z(e)}},diaEHoraEscolhidos:{diaEscolhido:y,horarioEscolhido:A},diasIndisponiveis:Y}),1===a&&(0,f.jsx)(H,{instrumentoState:{instrumento:p,setInstrumento:S},instrumentosDisponiveis:O}),3===a&&(0,f.jsx)(c.Z,{className:"pedido-texto-finalizado",children:"Aguarde o professor analisar a proposta, se for aceita poder\xe1 fazer o pagamento"})]}),(0,f.jsx)(v.Z,{className:"botao-passar-etapa",onClick:function(){if(0===a)!function(e,n){var a=e.minute().toString();1!==a.length&&(a=a[1]),a.includes(0)||a.includes(5)||N("O hor\xe1rio escolhido n\xe3o est\xe1 dispon\xedvel, o hor\xe1rio foi alterado para o mais pr\xf3ximo poss\xedvel")}(y),d(a+1);else if(1===a){if(null===p)return void N("Escolha um instrumento!");d(a+1),K()}else 3===a?D("/pedidos"):1!==a&&d(a+1)},children:V})]}):(0,f.jsx)(g.Z,{})]})},M=a(2703),O=["Escolha o dia","Escolha o instrumento","Proposta Feita"];var L=function(){var e=(0,r.useState)(null),n=(0,s.Z)(e,2),a=n[0],c=n[1],d=(0,r.useState)(0),u=(0,s.Z)(d,2),m=u[0],h=u[1],x=(0,r.useState)([]),j=(0,s.Z)(x,2),Z=j[0],v=j[1],g=(0,l.s0)(),S=new URLSearchParams(window.location.search).get("id");return(0,r.useEffect)((function(){(0,M.Wi)()&&g("/login")}),[]),(0,f.jsx)(o.Z,{tela:"realizar-pedido",errosState:{erros:Z,setErros:v},children:(0,f.jsxs)(i.Z,{className:"pagina-container",children:[(0,f.jsx)(p,{idProfessor:S,instrumento:a}),(0,f.jsx)(F,{stepsState:{step:m,steps:O,setStep:h},instrumentoState:{instrumento:a,setInstrumento:c},idProfessor:S,adicionarErro:function(e){return v([].concat((0,t.Z)(Z),[e]))}})]})})}}}]);
//# sourceMappingURL=863.292ee67d.chunk.js.map