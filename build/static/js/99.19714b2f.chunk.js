"use strict";(self.webpackChunkharmonyo=self.webpackChunkharmonyo||[]).push([[99],{1687:function(a,e,o){var t=o(1243).Z.create({baseURL:"http://".concat("54.81.42.147:80")});e.Z=t},3345:function(a,e,o){var t=o(9439),n=o(3044),r=o(2791),c=o(1659),s=o(184);function i(a,e){var o=a.id,i=a.nome,l=(0,r.useState)(""),u=(0,t.Z)(l,2),d=u[0],h=u[1],m=(0,r.useState)(!1),f=(0,t.Z)(m,2),p=f[0],x=f[1];(0,r.useImperativeHandle)(e,(function(){return{getImgPerfilURL:function(){return d}}}),[d]);var g=function(a){var e="/imgs-perfil-usuario/".concat(a,"_ft_perfil");c.t.ref(e).getDownloadURL().then((function(a){h(a)})).catch((function(){x(!0)}))};(0,r.useEffect)((function(){a.naoCarregar&&(a.imgUrl?h(a.imgUrl):g(o))}),[]),(0,r.useEffect)((function(){a.imgUrl?(h(a.imgUrl),x(!1)):g(o)}),[a.recarregarImg]);var v=p?"#099250":"#eeeeee",Z=a.sx?a.sx:{};return Z.bgcolor=v,p?(0,s.jsx)(n.Z,{className:a.className,onClick:a.onClick,"aria-controls":a.ariaControls,"aria-haspopup":a.ariaHaspopup,"aria-expanded":a.ariaExpanded,sx:Z,children:p?i.charAt(0):""}):(0,s.jsx)(n.Z,{src:p?null:d,className:a.className,onClick:a.onClick,"aria-controls":a.ariaControls,"aria-haspopup":a.ariaHaspopup,"aria-expanded":a.ariaExpanded,sx:Z,children:p?i.charAt(0):""})}e.Z=(0,r.forwardRef)(i)},4056:function(a,e,o){o.d(e,{Z:function(){return V}});var t=o(9439),n=o(2791),r=o(4554),c=o(6151),s=o(9284),i=o(9310),l=o(2125),u=o(6630),d=o(9230),h=o(3709),m=o(13),f=o(2167),p=o(297),x=o(8401),g=o(533),v=o(890),Z=o(184);var b=function(a){return(0,Z.jsx)(g.Z,{className:"navbar-lateral-card-container",href:a.href,underline:"none",children:(0,Z.jsxs)(r.Z,{className:"navbar-lateral-card ".concat(a.active?"active":"not-active"),children:[a.hover?(0,Z.jsx)(a.icon,{className:"navbar-lateral-card-img-hover"}):(0,Z.jsx)(a.icon,{className:"navbar-lateral-card-img"}),a.hover?(0,Z.jsx)(v.Z,{className:"navbar-lateral-card-texto",children:a.titulo}):""]})})},j=o(1687);var N=function(a){var e=n.useState(!1),o=(0,t.Z)(e,2),g=o[0],v=o[1],N=sessionStorage.getItem("CATEGORIA").toLocaleLowerCase(),E={professor:[{titulo:"Dashboard",icon:i.Z,active:"dashboard"===a.tela,href:"/dashboard-professor"},{titulo:"Agenda",icon:l.Z,active:"agenda"===a.tela,href:"/agenda"},{titulo:"Pedidos",icon:u.Z,active:"pedidos"===a.tela,href:"/pedidos"},{titulo:"Chat",icon:d.Z,active:"chat"===a.tela,href:"/chat"},{titulo:"Aulas",icon:h.Z,active:"aulas"===a.tela,href:"/aulas"},{titulo:"Feedbacks",icon:m.Z,active:"feedbacks"===a.tela,href:"/feedbacks"}],aluno:[{titulo:"Encontrar",icon:f.Z,active:"encontrar"===a.tela,href:"/encontrar-professor"},{titulo:"Agenda",icon:l.Z,active:"agenda"===a.tela,href:"/agenda"},{titulo:"Pedidos",icon:u.Z,active:"pedidos"===a.tela,href:"/pedidos"},{titulo:"Chat",icon:d.Z,active:"chat"===a.tela,href:"/chat"},{titulo:"Feedbacks",icon:m.Z,active:"feedbacks"===a.tela,href:"/feedbacks"}],administrador:[{titulo:"Dashboard",icon:i.Z,active:"dashboard"===a.tela,href:"/dashboard-administrador"}]};return(0,Z.jsx)(r.Z,{className:"navbar-lateral-background",children:(0,Z.jsxs)(r.Z,{className:"navbar-lateral",onMouseEnter:function(){return setTimeout((function(){return v(!0)}),50)},onMouseLeave:function(){return setTimeout((function(){return v(!1)}),150)},children:[(0,Z.jsxs)("a",{href:"/",className:"navbar-lateral-logo-container",children:[(0,Z.jsx)(s.Z,{icon:!0,white:!0,height:"40px",className:"navbar-lateral-logo ".concat(g?"hidden":"")}),(0,Z.jsx)(s.Z,{white:!0,width:"200px",className:"navbar-lateral-logo ".concat(g?"":"hidden")})]}),(0,Z.jsxs)(r.Z,{className:"navbar-lateral-cards",children:[E[N].map((function(a){return(0,Z.jsx)(b,{href:a.href,titulo:a.titulo,icon:a.icon,active:a.active,hover:g},"opcao-navbar-".concat(a.titulo))})),"administrador"===N?(0,Z.jsxs)(c.Z,{onClick:function(){var a=sessionStorage.EMAIL;fetch("http://localhost:8080/professores/download-csv",{method:"GET",responseType:"blob",headers:{Authorization:"Bearer ".concat(sessionStorage.TOKEN)}}).then((function(a){return a.blob()})).then((function(a){var e=window.URL.createObjectURL(a),o=document.createElement("a");o.href=e,o.download="data.csv",o.click(),window.URL.revokeObjectURL(e)})).catch((function(a){console.error("Erro:",a)}));var e="http://localhost:8080/upload-log/".concat(a,"/").concat("downloadCSV"),o=sessionStorage.TOKEN,t={headers:{Authorization:"Bearer ".concat(o)}};j.Z.post(e,{},t).then((function(a){console.log("Resposta do servidor:",a.data)})).catch((function(a){console.error("Erro na solicita\xe7\xe3o:",a)}))},color:"primary",className:"button-export",children:[" ",(0,Z.jsx)(p.Z,{className:"export-logo "})," ",(0,Z.jsxs)("h4",{className:"export-logo ".concat(g?"":"hidden"),children:[" ","Exporta\xe7\xe3o dados PROF. - CSV."]})," "]}):"","administrador"===N?(0,Z.jsxs)(c.Z,{color:"primary",className:"button-export",component:"label",children:[(0,Z.jsx)(x.Z,{className:"export-logo "}),(0,Z.jsx)("h4",{className:"export-logo ".concat(g?"":"hidden"),children:"Importar dados usu\xe1rio TXT."}),(0,Z.jsx)("input",{type:"file",hidden:!0,accept:".txt",onChange:function(a){return function(a){var e=a.target.files[0],o=new FormData;console.log("entrou no import txt"),o.append("file",e),j.Z.post("http://localhost:8080/usuarios/importacao-dados-txt",o,{headers:{Authorization:"Bearer ".concat(sessionStorage.TOKEN),"Content-Type":"multipart/form-data"}}).then((function(a){console.log(a)})).catch((function(a){console.log(a)}))}(a)}})]}):"","administrador"===N?(0,Z.jsxs)(c.Z,{onClick:function(){fetch("http://localhost:8080/usuarios/download-txt-professor",{method:"GET",responseType:"blob",headers:{Authorization:"Bearer ".concat(sessionStorage.TOKEN)}}).then((function(a){return a.blob()})).then((function(a){var e=window.URL.createObjectURL(a),o=document.createElement("a");o.href=e,o.download="data-professor.txt",o.click(),window.URL.revokeObjectURL(e)})).catch((function(a){console.error("Erro:",a)}))},color:"primary",className:"button-export",children:[" ",(0,Z.jsx)(p.Z,{className:"export-logo "})," ",(0,Z.jsxs)("h4",{className:"export-logo ".concat(g?"":"hidden"),children:[" ","Exporta\xe7\xe3o dados PROF - TXT."]})," "]}):"","administrador"===N?(0,Z.jsxs)(c.Z,{onClick:function(){fetch("http://localhost:8080/usuarios/download-txt-aluno",{method:"GET",responseType:"blob",headers:{Authorization:"Bearer ".concat(sessionStorage.TOKEN)}}).then((function(a){return a.blob()})).then((function(a){var e=window.URL.createObjectURL(a),o=document.createElement("a");o.href=e,o.download="data-aluno.txt",o.click(),window.URL.revokeObjectURL(e)})).catch((function(a){console.error("Erro:",a)}))},color:"primary",className:"button-export",children:[" ",(0,Z.jsx)(p.Z,{className:"export-logo "})," ",(0,Z.jsxs)("h4",{className:"export-logo ".concat(g?"":"hidden"),children:[" ","Exporta\xe7\xe3o dados ALUNO - TXT."]})," "]}):""]})]})})},E=o(2),C=o(3021),k=o(3786),w=o.p+"static/media/business-proposal.0fb9562397d64134bfe0.png",I=o(5117);var S=function(a){return(0,Z.jsx)(I.Z,{id:a.menuId,anchorEl:a.anchorEl,open:a.open,onClose:a.handleClose,MenuListProps:{"aria-labelledby":a.buttonClassName},children:a.children})},T=o(2426),L=o.n(T),y=(o(827),function(a,e){return j.Z.put(a,e,{headers:{Authorization:"Bearer ".concat(sessionStorage.TOKEN)}})});var R=function(a){var e=sessionStorage.getItem("ID"),o=(0,n.useState)(0),c=(0,t.Z)(o,2),s=c[0],i=c[1],l=(0,n.useState)([]),u=(0,t.Z)(l,2),d=u[0],h=u[1],m=(0,n.useState)(0),f=(0,t.Z)(m,2),p=f[0],x=f[1],g=(0,n.useState)(null),b=(0,t.Z)(g,2),N=b[0],I=b[1],T=!!N,R=function(){var a;(a="/notificacoes/usuario/".concat(sessionStorage.ID),j.Z.get(a,{headers:{Authorization:"Bearer ".concat(sessionStorage.TOKEN)}})).then((function(a){var e=a.data,o=e.content;console.log("Recebi a notificacao: "),console.log(o),204!==a.status?(o.forEach((function(a){a.tempo=L()(a.data).fromNow(),a.src=w})),i(e.totalPages),h(o),x(o.filter((function(a){return!a.lida})).length)):h([])})).catch((function(a){console.log(a)}))};return(0,n.useEffect)((function(){R()}),[]),(0,Z.jsxs)("div",{children:[(0,Z.jsx)(C.Z,{id:"notificacao-botao",className:"container-usuario-notificacao",color:"primary",badgeContent:p,"aria-controls":T?"notificacao-menu":void 0,"aria-haspopup":"true","aria-expanded":T?"true":void 0,onClick:function(a){I(a.currentTarget)},children:(0,Z.jsx)(E.Z,{})}),(0,Z.jsxs)(S,{menuId:"notificacao-menu",buttonClassName:"notificacao-botao",anchorEl:N,open:T,handleClose:function(){I(null)},className:"notificacao-card",children:[(0,Z.jsxs)(r.Z,{className:"notificacao-menu-container-title",children:[(0,Z.jsx)(v.Z,{className:"notificacao-menu-title",children:"Notifica\xe7\xf5es"}),p>0?(0,Z.jsx)(v.Z,{className:"notificacao-menu-lido",onClick:function(){y("/notificacoes/lida-usuario/".concat(e),{}).then((function(a){200===a.status&&(d.forEach((function(a){a.lida=!0})),h(d),x(0))})).catch((function(a){console.log(a)}))},children:"Marcar como visto"}):""]}),d.map((function(a){return(0,Z.jsxs)(k.Z,{className:"notificacao-menu-item",onClick:function(){var e;e=a.id,y("/notificacoes/lida/".concat(e),{}).then((function(a){200===a.status&&(alert("Lendo a notificacao com id: "+e),d.forEach((function(a){a.id===e&&(a.lida=!0)})),h(d),p>0&&x(p-1))})).catch((function(a){console.log(a)}))},sx:{backgroundColor:a.lido?"var(--notificacao-nao-lida)":"var(--notificacao-lida)"},children:[(0,Z.jsxs)(r.Z,{className:"notificacao-menu-item-info-container",children:[(0,Z.jsx)("img",{src:a.src,className:"notificacao-menu-item-img",alt:""}),(0,Z.jsx)(v.Z,{className:"notificacao-menu-item-titulo",children:a.titulo})]}),(0,Z.jsx)(r.Z,{className:"notificacao-menu-item-container-tempo",children:(0,Z.jsx)(v.Z,{className:"notificacao-menu-item-tempo",children:a.tempo})})]},a.id)})),s>1?(0,Z.jsx)(r.Z,{sx:{width:"100%",height:"fit-content",display:"flex",justifyContent:"center",alignItems:"center"},children:(0,Z.jsx)(v.Z,{className:"notificacao-menu-lido",children:"Mostrar Todos"})}):""]})]})},U=o.p+"static/media/user.05d0404ad8a0ab5bdefa.png",A=o.p+"static/media/logout.0becdbc391b7088ace83.png",O=o(7689),z=o(3345),B=[{id:1,src:U,titulo:"Meu Perfil",url:"/perfil"},{id:3,src:A,titulo:"Sair",url:"/"}],D=sessionStorage.getItem("NOME");var K=function(a){var e=(0,O.s0)(),o=n.useState(null),c=(0,t.Z)(o,2),s=c[0],i=c[1],l=Boolean(s),u=function(a){i(null),e(a.url)};return(0,Z.jsxs)("div",{children:[(0,Z.jsx)(z.Z,{id:sessionStorage.getItem("ID"),nome:D,className:"avatar-usuario-img",onClick:function(a){i(a.currentTarget)},ariaControls:l?"avatar-usuario-menu":void 0,ariaHaspopup:"true",ariaExpanded:l?"true":void 0,recarregarImg:a.recarregarTodasImgs}),(0,Z.jsxs)(S,{menuId:"avatar-usuario-menu",buttonClassName:"avatar-usuario-botao",anchorEl:s,open:l,handleClose:u,children:[(0,Z.jsxs)(r.Z,{className:"avatar-usuario-menu-user-info",children:[(0,Z.jsx)(z.Z,{id:sessionStorage.getItem("ID"),className:"avatar-usuario-img",nome:D}),(0,Z.jsxs)(r.Z,{className:"avatar-usuario-menu-user-info-text",children:[(0,Z.jsx)(v.Z,{className:"avatar-usuario-menu-nome",children:D}),(0,Z.jsx)(v.Z,{className:"avatar-usuario-menu-email",children:sessionStorage.getItem("EMAIL")})]})]}),(0,Z.jsx)(r.Z,{className:"opcoes-container",children:B.map((function(a){return(0,Z.jsxs)(k.Z,{className:"avatar-usuario-menu-item",onClick:function(){return u(a)},children:[(0,Z.jsx)("img",{src:a.src,className:"avatar-usuario-menu-item-img",alt:""}),(0,Z.jsx)(v.Z,{className:"avatar-usuario-menu-item-titulo",children:a.titulo})]},a.id)}))})]})]})};var P=function(a){return(0,Z.jsxs)(r.Z,{className:"container-usuario",children:[(0,Z.jsx)(R,{}),(0,Z.jsx)(K,{recarregarTodasImgs:a.recarregarTodasImgs})]})},F=o(4070),M=o(3400),G=o(3503),H=o(6739);var V=function(a){var e=(0,n.useState)([]),o=(0,t.Z)(e,2),c=o[0],s=o[1],i=a.avisosState,l=(0,n.useState)(!1),u=(0,t.Z)(l,2),d=(u[0],u[1]),h=a.recarregarTodasImgs,m=(0,n.useState)(!0),f=(0,t.Z)(m,2),p=f[0];return f[1],a.carregarPaginaForcado,(0,n.useEffect)((function(){i&&s(i.avisos)}),[i]),(0,n.useEffect)((function(){h&&d(h)}),[h]),(0,Z.jsxs)(r.Z,{className:"mui-root",children:[(0,Z.jsx)(r.Z,{className:"erro-container",children:c&&c.map((function(a,e){return function(a,e,o,t){var n;switch(a.tipo){case"sucesso":n="success";break;case"erro":n="error";break;default:n="info"}return(0,Z.jsx)(F.Z,{severity:n,action:(0,Z.jsx)(M.Z,{"aria-label":"close",color:"inherit",size:"small",onClick:function(){return e(o.filter((function(a,e){return e!==t})))},children:(0,Z.jsx)(H.Z,{fontSize:"inherit"})}),sx:{zIndex:1e3},children:a.mensagem},t)}(a,i.setAvisos,i.avisos,e)}))}),(0,Z.jsx)(N,{tela:a.tela}),(0,Z.jsxs)(r.Z,{className:"pagina-padrao-container",children:[(0,Z.jsx)(P,{recarregarTodasImgs:h}),p?a.children:(0,Z.jsx)(G.Z,{})]})]})}},1659:function(a,e,o){o.d(e,{db:function(){return r},t:function(){return c}});var t=o(3897),n=(o(2806),o(5778),t.Z.initializeApp({apiKey:"AIzaSyBlrwBDwFdwkutdVO2Ilg6KUPnFFwKWD2k",authDomain:"chat-harmonyo.firebaseapp.com",projectId:"chat-harmonyo",storageBucket:"chat-harmonyo.appspot.com",messagingSenderId:"295019787606",appId:"1:295019787606:web:eb01ac75f11c05b72d92f7",measurementId:"G-2K9ZW7N0C1"})),r=n.firestore(),c=n.storage("gs://chat-harmonyo.appspot.com/")}}]);
//# sourceMappingURL=99.19714b2f.chunk.js.map